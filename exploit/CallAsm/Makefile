TARGET_NAME := exploit
TARGET_ARCH := win64

LIB_NAME := printY
LIB_DIR := lib

BUILD_DIR := build

all:
	@if not exist $(BUILD_DIR) (mkdir $(BUILD_DIR))
	@nasm -f $(TARGET_ARCH) $(LIB_DIR)/$(LIB_NAME).asm -o $(BUILD_DIR)/$(LIB_NAME).o
	@gcc -c  main.c -o $(BUILD_DIR)/main.o
	@gcc $(BUILD_DIR)/$(LIB_NAME).o $(BUILD_DIR)/main.o  -o $(BUILD_DIR)/$(TARGET_NAME).exe

clean:
	@rmdir /s build
